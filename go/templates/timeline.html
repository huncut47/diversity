{{ define "title" }}
{{ if eq .Endpoint "public_timeline" }}
    Public Timeline
{{ else if eq .Endpoint "user_timeline" }}
    {{ .ProfileUser.Username }}'s Timeline
{{ else }}
    My Timeline
{{ end }}
{{ end }}


{{ define "body" }}

<h2>{{ template "title" . }}</h2>

{{ if .User }}

    {{ if eq .Endpoint "user_timeline" }}
        <div class="followstatus">

        {{ if eq .User.ID .ProfileUser.ID }}
            This is you!

        {{ else if .Followed }}
            You are currently following this user.
            <a class="unfollow" href="/unfollow/{{ .ProfileUser.Username }}">
                Unfollow user
            </a>

        {{ else }}
            You are not yet following this user.
            <a class="follow" href="/follow/{{ .ProfileUser.Username }}">
                Follow user
            </a>
        {{ end }}

        </div>

    {{ else if eq .Endpoint "timeline" }}
        <div class="twitbox">
            <h3>What's on your mind {{ .User.Username }}?</h3>
            <form action="/message" method="post">
                <input type="text" name="text" size="60">
                <input type="submit" value="Share">
            </form>
        </div>
    {{ end }}

{{ end }}


<ul class="messages">

{{ if .Messages }}
    {{ range .Messages }}
        <li>
            <img src="{{ .GravatarURL }}">
            <p>
            <strong>
                <a href="/user/{{ .Username }}">
                    {{ .Username }}
                </a>
            </strong>
            {{ .Text }}
            <small>&mdash; {{ .FormattedDate }}</small>
        </li>
    {{ end }}
{{ else }}
    <li><em>There's no message so far.</em></li>
{{ end }}

</ul>

{{ end }}
